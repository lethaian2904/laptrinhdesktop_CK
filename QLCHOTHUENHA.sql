CREATE DATABASE QLCHOTHUENHA
GO

USE QLCHOTHUENHA
GO

CREATE TABLE NHA(
	MaNha VARCHAR (10) PRIMARY KEY,
	TenChuNha NVARCHAR(50) NOT NULL,
	GiaThue FLOAT NOT NULL,
	DaCHoThue BIT NOT NULL
);
GO
CREATE TABLE KHACHTHUENHA(
	MaKhach VARCHAR (10) PRIMARY KEY,
	TenKhach NVARCHAR(50) NOT NULL,
	GioiTinh BIT NOT NULL,
	NgaySinh DATETIME NOT NULL
);
GO

CREATE TABLE HOPDONG(
	SoHD INT IDENTITY (1,1)  PRIMARY KEY,
	MaNha VARCHAR(10) NOT NULL,
	MaKhach VARCHAR(10) NOT NULL,
	NgayBatDau DATE NOT NULL,
	NgayKetThuc DATE NOT NULL,

	FOREIGN KEY (MaNha) 
        REFERENCES NHA (MaNha) 
        ON DELETE CASCADE ON UPDATE CASCADE,
	
	FOREIGN KEY (MaKhach) 
        REFERENCES KHACHTHUENHA (MaKhach) 
        ON DELETE CASCADE ON UPDATE CASCADE,
);


INSERT INTO NHA VALUES
	('01',N'Thị A',30000,0),
	('02', N'Ông B',40000,1),
	('03',N'Ông C',30000,1),
	('04',N'Ông D',20000,1);

GO

INSERT INTO KHACHTHUENHA VALUES
	('01',N'Bui A', 1,'2004-05-12'),
	('02', N'Bùi B', 0,'2004-04-23'),
	('03',N'Bùi C', 1,'2002-01-17');
	
GO

INSERT INTO HOPDONG(MaNha, MaKhach, NgayBatDau, NgayKetThuc) VALUES
	('02','01','2023-03-12','2024-04-12'),
	('03','02','2023-03-12','2024-09-03'),
	('04','03','2023-03-12','2023-07-14');
	
GO



	

